@model SLE_System.Models.LoginViewModel
@{
    ViewData["Title"] = "Login";
}
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Iniciar sesión</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <link rel="stylesheet" href="~/Assets/plugins/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="~/Assets/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
  <link rel="stylesheet" href="~/Assets/dist/css/adminlte.min.css">
  <link rel="stylesheet" href="~/Home.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body class="hold-transition login-page">
    <div class="top-container-deep">
        <img src="~/img/fondo_top.png" />
    </div>
    <div class="general-pictures">
        <div class="men-image-container">
            <img src="~/img/hombre.png" />
        </div>
        <div class="women-image-container">
            <img src="~/img/mujer.png" />
        </div>
    </div>
<div class="login-box container-login">
    <div class="top-container">
        
    </div>
  <div class="card card-outline">
    <div class="text-center logo-container">
      <img src="~/img/logo.png" />
    </div>
    <div class="card-body">

        <div class="text-container">
            <p>Iniciar Sesión</p>
        </div>
      <form method="post">
       <div>
            <div class="label-container">
                <span>Correo o Nombre de Usuario</span>
            </div>
            <div class="container-user">
                <input asp-for="Usuario" class="form-control input-user" placeholder="" />
                <span asp-validation-for="Usuario" class="text-danger"></span>
            </div>
            <div class="label-container">
                <span>Contraseña</span>
            </div>
            <div class="container-password">
                <input asp-for="Clave" class="form-control input-password" placeholder="&#xf023" />
                <span asp-validation-for="Clave" class="text-danger"></span>
             </div>
             <div class="item-container">
                 <input type="checkbox" /><span class="span-item">Recordarme</span>
                 <a href="#" data-toggle="modal" data-target="#passwordmodal">¿Olvidaste tu contraseña?</a> 
             </div>

               <div class="modal fade" id="passwordmodal">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 class="modal-title" id="modalTitleModulo">Actualizar Contraseña</h4>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form id="sendEmail">
                        <div class="modal-body">
                            <div class="card-body">
                              <div class="form-group">
                                <label for="email">Correo</label>
                                <input type="email" name="email" id="email" class="form-control">
                              </div>
                            </div>
                        </div>
                        <div class="modal-footer justify-content-between">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                          <button type="submit" class="btn btn-primary">Enviar</button>
                        </div>
                    </form>
                  </div>
                  <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="container-button">
                <button type="submit">Iniciar Sesion</button>
            </div>
        </div>
      </form>
    </div>
  </div>
</div>
<script src="~/Assets/plugins/jquery/jquery.min.js"></script>
<script src="~/Assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="~/Assets/dist/js/adminlte.min.js"></script>

<script type="text/javascript">

$.validator.setDefaults({
        submitHandler: function () {
            let formData = {
              email: $("#email").val(),
            };
            $.ajax({
              type: "POST",
              url: "/Account/sendingEmail",
              headers: { "RequestVerificationToken": "@GetAntiXsrfRequestToken()" },
              data: formData,
              success: function (response) {
                Swal.fire({
                    text: 'Verifica la bandeja de entreada!',
                    type: 'success',
                    showConfirmButton: false,
                    timer: 1500
                  })
                  location.reload();
              }
            });
        }
      });
      $('#sendEmail').validate({
        rules: {
          email: {
            required: true,
          },
        },
        messages: {
          email: {
            required: "Ingrese un Correo Valido",
          },
        },
        errorElement: 'span',
        errorPlacement: function (error, element) {
          error.addClass('invalid-feedback');
          element.closest('.form-group').append(error);
        },
        highlight: function (element, errorClass, validClass) {
          $(element).addClass('is-invalid');
        },
        unhighlight: function (element, errorClass, validClass) {
          $(element).removeClass('is-invalid');
        }
      });    

</script>
</body>
</html>
